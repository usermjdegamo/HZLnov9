@model IEnumerable<H.Models.Order>
@{
    ViewBag.Title = "Order";
}

<h1>My bought orders</h1>
<div class="row">
    <div class="col-md-8 offset-md-2">

        <table class="table">
            <thead>
                <tr class="text-center">
                    <th>Order ID</th>
                    <th>Product Name</th>
                    <th>Product Price</th>
                    <th>Quantity</th>
                    <th>Total Price</th>
                    <th>Actions</th>
                    <th>Served</th>
                </tr>
            </thead>
            <tbody>
                @{ 
                    int haha = 0;
                }
                @foreach (var item in Model)
                {
                <tr>
                    <td class="align-middle">
                        @Html.DisplayFor(modelItem => item.id)
                    </td>
                    <td class="align-middle">
                        @Html.DisplayFor(modelItem => item.Product.name)
                    </td>
                    <td class="align-middle">
                        @Html.DisplayFor(modelItem => item.Product.price)
                    </td>
                    <td class="align-middle">
                        @Html.DisplayFor(modelItem => item.quantity)
                    </td>
                    @{
                        int tagpila = Convert.ToInt32(item.Product.price) * Convert.ToInt32(item.quantity);
                        haha += tagpila;
                        ViewBag.tagpila = tagpila;
                    }
                    <td class="align-middle">
                        @tagpila
                    </td>
                    <td class="align-middle">
                        <a class="btn btn-danger text-white" onclick="location.href='@Url.Action("OrderDelete", "Management", new { id = item.id })'" data-id="@item.id"><i class="bi bi-trash"></i>Delete</a>
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.served)
                    </td>
                </tr>
                }
            </tbody>
        </table>
        <div>
            <h2>Total spent: @haha</h2>
        </div>
    </div>
</div>
